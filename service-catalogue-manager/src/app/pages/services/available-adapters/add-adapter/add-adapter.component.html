<nb-card>
  <nb-card-header class="d-flex align-content-center justify-content-between">
    <div> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </div>
    <div>
      <h3>{{ 'general.adapters.add' | translate }}</h3>
    </div>
    <button nbButton appearance="outline" shape="semi-round" size="tiny" status="info" (click)="cancel()">
      <i class="material-icons">close</i>
    </button>
  </nb-card-header>
  <nb-card-body class="m-2 p-4">
    <h6>
      <form>
        <label for="adapterId" fullWidth>{{ 'general.adapters.adapterId' | translate }}</label>
        <br>

        <!--
        <nb-select *ngIf="loaded" fullWidth placeholder="Select adapter ID" [(ngModel)]="adapterId"
          [ngModelOptions]="{standalone: true}">
          <nb-option *ngFor="let map of mappers" value={{map.id}}>{{map.id}}</nb-option>
        </nb-select>
        -->

        <!--<input type="text" *ngIf="type!='MODEL'||context!='IMPORT'" nbInput fullWidth fieldSize="small"
          placeholder="Insert ID manually or click 'Load mapper list' button" [(ngModel)]="adapterId"
          [ngModelOptions]="{standalone: true}">-->

        <!--<input #autoInput nbInput *ngIf="type!='MODEL'||context!='IMPORT'" type="text" (input)="onChange()" placeholder="Enter value"
          [nbAutocomplete]="auto" />

        <nb-autocomplete #auto (selectedChange)="onSelectionChange($event)">

          <nb-option *ngFor="let option of filteredOptions$ | async" [value]="option">
            {{ option }}
          </nb-option>

        </nb-autocomplete>-->


        <!--
        <input [formControl]="inputFormControl" nbInput type="text" placeholder="Form control"
          [nbAutocomplete]="autoControl" />

        <nb-autocomplete #autoControl>

          <nb-option *ngFor="let option of filteredControlOptions$ | async" [value]="option">
            {{ option }}
          </nb-option>

        </nb-autocomplete>
        -->

        <input [ngModel]="adapterId" (ngModelChange)="onAdapterIDChange($event)" nbInput type="text" fullWidth placeholder="adapterId"
          [nbAutocomplete]="autoNgModel" [ngModelOptions]="{standalone: true}"/>

        <nb-autocomplete #autoNgModel>

          <nb-option *ngFor="let option of filteredNgModelOptions$ | async" [value]="option">
            {{ option }}
          </nb-option>

        </nb-autocomplete>

<!--
        <input *ngIf="!loaded && (context!='IMPORT'||type!='MODEL')" type="text" nbInput fullWidth fieldSize="small"
          placeholder="Insert ID manually or click 'Load mapper list' button" [(ngModel)]="adapterId"
          [ngModelOptions]="{standalone: true}">
        <input *ngIf="type=='MODEL' && context=='IMPORT'" type="text" nbInput fullWidth fieldSize="small"
          placeholder="Default ID" [(ngModel)]="adapterId" [ngModelOptions]="{standalone: true}" disabled>
          -->

        <br>
        <br>

        <label for="name" fullWidth>{{ 'general.adapters.name' | translate }}</label>
        <br>
        <input [ngModel]="name" (ngModelChange)="onNameChange($event)" nbInput type="text" fullWidth placeholder="Name"
          [nbAutocomplete]="autoNgModel2" [ngModelOptions]="{standalone: true}"/>

        <nb-autocomplete #autoNgModel2>

          <nb-option *ngFor="let n of filteredNgModelOptions2$ | async" [value]="n">
            {{ n }}
          </nb-option>

        </nb-autocomplete>

        <!--
        <input type="text" fullWidth nbInput fieldSize="small" placeholder="name" [(ngModel)]="name"
          [ngModelOptions]="{standalone: true}">
          -->
        <br><br>
        <label for="status">{{ 'general.adapters.status' | translate }}</label>
        <br>
        <input type="text" nbInput fullWidth fieldSize="small" placeholder="status" [(ngModel)]="status"
          [ngModelOptions]="{standalone: true}" disabled>
        <br>
        <br>
        <label for="url">{{ 'general.adapters.url' | translate }}</label>
        <br>
        <input type="text" *ngIf="!loaded" nbInput fullWidth fieldSize="small" placeholder="url" [(ngModel)]="url"
          [ngModelOptions]="{standalone: true}">
        <input type="text" *ngIf="loaded" nbInput fullWidth fieldSize="small" placeholder="url" [(ngModel)]="url"
          [ngModelOptions]="{standalone: true}" disabled>
        <br><br>
        <label for="description">{{ 'general.adapters.description' | translate }}</label>
        <br>
        <textarea nbInput fullWidth fieldSize="medium" placeholder="description" [(ngModel)]="description"
          [ngModelOptions]="{standalone: true}"></textarea>
        <br><br>
        <label for="type">{{ 'general.adapters.type' | translate }}</label>
        <br>
        <nb-select fullWidth placeholder="Select adapter type" [(ngModel)]="type" [ngModelOptions]="{standalone: true}">
          <nb-option-group title="type">
            <nb-option value="MODEL">Model</nb-option>
            <nb-option value="DATA">Data</nb-option>
          </nb-option-group>
        </nb-select>
        <br><br>
        <label *ngIf="type=='MODEL'" for="context">{{ 'general.adapters.context' | translate
          }}</label>
        <br *ngIf="type=='MODEL'">
        <nb-select *ngIf="type=='MODEL'" fullWidth placeholder="Select adapter context" [(ngModel)]="context"
          [ngModelOptions]="{standalone: true}">
          <nb-option-group title="context">
            <nb-option value="IMPORT">Import</nb-option>
            <nb-option value="EXPORT">Export</nb-option>
          </nb-option-group>
        </nb-select>
        <br>
        <br>
        <h3>
          <p *ngIf="validURL==false" style=" text-align : center; font-size: 14px; color: red ">Invalid URL <br><br></p>
          <button *ngIf="type=='MODEL'&&context=='IMPORT' || loaded" nbButton appearance="outline" shape="semi-round"
            size="medium" status="info" (click)="confirm()">
            <i class="mx-1">{{ 'general.adapters.confirm' | translate }}</i>
          </button>
          &nbsp;
          <button *ngIf="(type!='MODEL'||context!='IMPORT') && !loaded" nbButton appearance="outline" shape="semi-round"
            size="medium" status="info" (click)="loadMappers()">
            <i class="mx-1">{{ 'general.adapters.load_mapper_list' | translate }}</i>
          </button>
        </h3>
      </form>
    </h6>
  </nb-card-body>
</nb-card>
