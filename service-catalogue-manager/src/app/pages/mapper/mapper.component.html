<ng-container *ngIf="isNew; then updateButton; else createButton"> </ng-container>
<ng-template #createButton>
  <button nbButton class="mx-4" shape="rectangle" size="medium" status="primary" (click)="saveAdapter()">
    {{ 'general.save' | translate }}
    <i class="mx-1 material-icons">save</i>
  </button>
</ng-template>
<ng-template #updateButton>
  <button nbButton class="mx-4" shape="rectangle" size="medium" status="primary" (click)="updateAdapter()">
    {{ 'general.editor.update' | translate }}
    <i class="mx-1 material-icons">update</i>
  </button>
</ng-template>
<button nbButton class="mx-4" shape="rectangle" size="medium" status="success" (click)="testAdapter()">
  {{ 'general.dmm.preview' | translate }}
</button>
<br><br><br>
Source

<div class="mb-2">
  <p>To get started, select the type of input (CSV or JSON) and upload or paste your data.
  </p>
  <p *ngIf="sourceRef!==''&&sourceRefFormat==='url'">URL: <a class="mb-3" href={{sourceRef}} target="_blank">
      <i>{{sourceRef}}</i></a></p>
  <p *ngIf="sourceRef!==''&&sourceRefFormat==='file'">File: <i>{{sourceRef}}</i></p>
  <div class="mb-2">
    <nb-select placeholder="Select Input Type" size="small" (selectedChange)="onUpdateInputType($event)">
      <nb-option value="csv">CSV</nb-option>
      <nb-option value="json">JSON</nb-option>
    </nb-select>
  </div>
  <div class="mb-1" style="display:none;" id="json-input">
    <div class="mb-2">
      <br><br>
      <button nbButton class="mr-2" shape="rectangle" size="small" (click)="import('source','json')">
        {{ 'general.editor.import' | translate }}
        <i class="mx-1 fas fa-file-import fa-lg"></i>
      </button>
      <nb-select placeholder="Select path" size="small" (selectedChange)="onUpdatePathForDataMap($event)">
        <nb-option value="">root.</nb-option>
        <nb-option *ngFor="let path of paths" value={{path}}>.{{path}}</nb-option>
      </nb-select>
    </div>

    <div style="height:500px" id="jsoneditor" (click)="onUpdatePathForDataMap('')"
      (focusout)="onUpdatePathForDataMap('')" (blur)="onUpdatePathForDataMap('')"></div>

  </div>
  <div class="mb-2" id="csv-input" style="display:none;">
    <div class="mb-2">
      <br><br>
      <button nbButton class="mr-2" shape="rectangle" size="small" (click)="import('source','csv')">
        {{ 'general.editor.import' | translate }}
        <i class="mx-1 fas fa-file-import fa-lg"></i>
      </button>
      <nb-select placeholder="Separator" size="small" [(selected)]="separatorItem">
        <nb-option value=",">Comma separator</nb-option>
        <nb-option value=";">Semi-colon separator</nb-option>
        <nb-option value="\t">Tab separator</nb-option>
      </nb-select>
    </div>
    <div class="mb-3" id="csveditor">
      <!--
                <nb-tabset (click)="updateCSVTable()" (focusout)="updateCSVTable()" (blur)="updateCSVTable()">
                  <nb-tab tabTitle="CSV text">
                    <textarea id="textarea" nbInput rows="10" fullWidth=true placeholder="Enter CVS text..."
                      [(ngModel)]="csvSourceData"></textarea>
                  </nb-tab>
                  <nb-tab id="csv-table" tabTitle="CSV Table">
                  </nb-tab>
                </nb-tabset>
              -->
    </div>
  </div>
</div>
